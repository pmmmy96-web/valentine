<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ˜ˆ</title>

<style>
  :root{
    --blood:#ff0033;
    --dark:#000;
  }

  body{
    margin:0;
    height:100dvh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:system-ui, -apple-system, "PingFang TC", "Noto Sans TC", sans-serif;
    overflow:hidden;
    background: #000;
    color:#fff;
  }

  /* ì‹¬ì¥ë°•ë™ ë°°ê²½ */
  body::before{
    content:"";
    position:fixed;
    inset:0;
    background: radial-gradient(circle at center, rgba(60,0,0,0.95) 0%, #000 70%);
    animation: pulse 1.9s ease-in-out infinite;
    z-index:0;
  }
  @keyframes pulse{
    0%{ transform:scale(1); opacity:0.75; }
    50%{ transform:scale(1.06); opacity:1; }
    100%{ transform:scale(1); opacity:0.75; }
  }

  /* ì•ˆê°œ */
  body::after{
    content:"";
    position:fixed;
    inset:-20%;
    background:
      radial-gradient(circle at 25% 40%, rgba(255,0,40,0.18), transparent 55%),
      radial-gradient(circle at 70% 65%, rgba(255,0,40,0.12), transparent 60%);
    filter: blur(18px);
    animation: fog 7s ease-in-out infinite alternate;
    pointer-events:none;
    z-index:1;
  }
  @keyframes fog{
    from{ transform:translate(-40px,-20px) scale(1.02); opacity:.85; }
    to{ transform:translate(40px,20px) scale(1.06); opacity:1; }
  }

  .card{
    width:min(420px,92vw);
    background: rgba(10,0,0,0.88);
    border: 1px solid rgba(255,0,40,0.18);
    padding:28px 22px;
    border-radius:24px;
    text-align:center;
    box-shadow: 0 0 55px rgba(255,0,40,0.35);
    backdrop-filter: blur(8px);
    position:relative;
    z-index:3;
  }

  h2{
    margin:0 0 18px;
    font-size:22px;
    letter-spacing: .5px;
    opacity:0;
    animation: fadeIn 2.6s ease forwards;
  }
  @keyframes fadeIn{ to{ opacity:1; } }

  .sub{
    margin:0 0 18px;
    font-size:13px;
    opacity:.55;
  }

  button{
    padding:14px 34px;
    font-size:18px;
    font-weight:900;
    border:none;
    border-radius:16px;
    background: linear-gradient(180deg, #b0001f, #6b0012);
    color:#fff;
    cursor:pointer;
    box-shadow: 0 0 18px rgba(255,0,40,0.65);
    transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
  }
  button:active{ transform: scale(.98); }
  button:hover{
    transform: scale(1.06);
    box-shadow: 0 0 32px rgba(255,0,40,1);
    filter:saturate(1.1);
  }
  button:disabled{
    opacity:.5;
    cursor:not-allowed;
    transform:none;
    box-shadow:none;
  }

  .videoWrap{
    display:none;
    margin-top:18px;
    border-radius:18px;
    overflow:hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,.45);
    border: 1px solid rgba(255,0,40,0.18);
  }

  video{
    display:block;
    width:100%;
    background:#000;
  }

  /* ì•”ì „ í”Œë˜ì‹œ */
  .flash{
    position:fixed;
    inset:0;
    background:#000;
    opacity:0;
    pointer-events:none;
    z-index:999;
    transition: opacity .35s ease;
  }

  .done{
    margin-top:16px;
    font-weight:900;
    letter-spacing:.5px;
  }
</style>
</head>

<body>
  <div class="flash" id="flash"></div>

  <div class="card">
    <h2>å¾Œé¢æ²’æœ‰åˆ¥äººå°å§ï¼Ÿ ğŸ˜ˆ</h2>
    <p class="sub">ï¼ˆæŒ‰ä¸‹å»ä¹‹å¾Œï¼Œåªèƒ½çœ‹ä¸€æ¬¡ã€‚ï¼‰</p>

    <button id="okBtn">OK</button>

    <div class="videoWrap" id="videoWrap">
      <video
        id="loveVideo"
        controls
        controlsList="nodownload noplaybackrate"
        disablePictureInPicture
        playsinline
        preload="metadata"
      >
        <source src="video.mp4" type="video/mp4">
      </video>
    </div>

    <div class="done" id="doneMsg" style="display:none;">å·²ç¶“çµæŸäº† ğŸ’‹</div>
  </div>

<script>
  const okBtn = document.getElementById("okBtn");
  const videoWrap = document.getElementById("videoWrap");
  const loveVideo = document.getElementById("loveVideo");
  const flash = document.getElementById("flash");
  const doneMsg = document.getElementById("doneMsg");

  // 1íšŒ ì œí•œ: "ì¬ìƒ ì‹œì‘" ìˆœê°„ ë°”ë¡œ ì ê¸ˆ (ìƒˆë¡œê³ ì¹¨í•´ë„ ë‹¤ì‹œ ëª» ë´„)
  const LOCK_KEY = "watchedVideo_v1";

  function lockUI(){
    okBtn.disabled = true;
    okBtn.textContent = "å·²ç¶“çœ‹éäº† ğŸ˜";
  }

  function showDone(){
    doneMsg.style.display = "block";
  }

  // ì´ë¯¸ ë³¸ ê²½ìš° ë°”ë¡œ ì°¨ë‹¨ UI
  if (localStorage.getItem(LOCK_KEY) === "true") {
    lockUI();
  }

  okBtn.addEventListener("click", async () => {
    if (localStorage.getItem(LOCK_KEY) === "true") return;

    // ğŸ”’ í´ë¦­ ì¦‰ì‹œ ì ê¸ˆ (ìƒˆë¡œê³ ì¹¨/ë’¤ë¡œê°€ê¸°ë„ ì¬ì‹œì²­ ë¶ˆê°€)
    localStorage.setItem(LOCK_KEY, "true");
    lockUI();

    // ì•”ì „ ì—°ì¶œ
    flash.style.opacity = "1";
    setTimeout(async () => {
      flash.style.opacity = "0";

      videoWrap.style.display = "block";

      try{
        await loveVideo.play();
      }catch(e){
        // ìë™ì¬ìƒ ì •ì±…/ì˜¤ë¥˜ ì‹œ ì•ˆë‚´
        alert("è«‹é»ä¸€ä¸‹å½±ç‰‡çš„æ’­æ”¾éµã€‚");
      }
    }, 550);
  });

  // ì˜ìƒ ëë‚˜ë©´ ë©”ì‹œì§€
  loveVideo.addEventListener("ended", () => {
    showDone();
  });

  // ìš°í´ë¦­/ê¸¸ê²Œëˆ„ë¥´ê¸° ë°©ì§€ (ì™„ì „ ì°¨ë‹¨ì€ ë¶ˆê°€)
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("dragstart", e => e.preventDefault());
</script>
</body>
</html>
